{"remainingRequest":"C:\\Users\\King\\Desktop\\web\\client\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\King\\Desktop\\web\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\King\\Desktop\\web\\client\\src\\http.js","dependencies":[{"path":"C:\\Users\\King\\Desktop\\web\\client\\src\\http.js","mtime":1640846185860},{"path":"C:\\Users\\King\\Desktop\\web\\client\\babel.config.js","mtime":1640153252323},{"path":"C:\\Users\\King\\Desktop\\web\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640153244649},{"path":"C:\\Users\\King\\Desktop\\web\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1640153244649},{"path":"C:\\Users\\King\\Desktop\\web\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1640153246038}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IExvYWRpbmcsIE1lc3NhZ2UgfSBmcm9tICJlbGVtZW50LXVpIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuL3JvdXRlci9pbmRleC5qcyI7CnZhciBsb2FkaW5nOwoKZnVuY3Rpb24gc3RhcnRMb2FkaW5nKCkgewogIGxvYWRpbmcgPSBMb2FkaW5nLnNlcnZpY2UoewogICAgbG9jazogdHJ1ZSwKICAgIHRleHQ6ICfliqDovInkuK0uLi4nLAogICAgYmFja2dyb3VuZDogJ3JnYmEoMCwwLDAsMCw3KScKICB9KTsKfQoKZnVuY3Rpb24gZW5kTG9hZGluZygpIHsKICBsb2FkaW5nLmNsb3NlKCk7Cn0gLy/oq4vmsYLmlJTmiKoKCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIHN0YXJ0TG9hZGluZygpOwoKICBpZiAobG9jYWxTdG9yYWdlLmVsZVRva2VuKSB7CiAgICAvL+ioree9rue1seS4gOeahOiri+axggogICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGxvY2FsU3RvcmFnZS5lbGVUb2tlbjsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvL+mfv+aHieaUlOaIqgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBlbmRMb2FkaW5nKCk7CiAgcmV0dXJuIHJlc3BvbnNlOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvL+mMr+iqpOaPkOmGkgogIGVuZExvYWRpbmcoKTsKICBNZXNzYWdlLmVycm9yKGVycm9yLnJlc3BvbnNlLmRhdGEpOyAvL+eNsuWPlumMr+iqpOeLgOaFi+eivAoKICB2YXIgc3RhdHVzID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzOwoKICBpZiAoc3RhdHVzID09IDQwMSkgewogICAgTWVzc2FnZS5lcnJvcigi55m75YWl5bey6LaF5pmCLOiri+mHjeaWsOeZu+WFpSIpOyAvL+a4hemZpHRva2VuCgogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImVsZVRva2VuIik7IC8v6Lez6L2J5Zue55m75YWl6aCB6Z2iCgogICAgcm91dGVyLnB1c2goIi9sb2dpbiIpOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["C:/Users/King/Desktop/web/client/src/http.js"],"names":["axios","Loading","Message","router","loading","startLoading","service","lock","text","background","endLoading","close","interceptors","request","use","config","localStorage","eleToken","headers","Authorization","error","Promise","reject","response","data","status","removeItem","push"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,YAAjC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,IAAIC,OAAJ;;AACA,SAASC,YAAT,GAAuB;AACtBD,EAAAA,OAAO,GAAGH,OAAO,CAACK,OAAR,CAAgB;AACzBC,IAAAA,IAAI,EAAE,IADmB;AAEzBC,IAAAA,IAAI,EAAC,QAFoB;AAGzBC,IAAAA,UAAU,EAAC;AAHc,GAAhB,CAAV;AAKA;;AAED,SAASC,UAAT,GAAqB;AACpBN,EAAAA,OAAO,CAACO,KAAR;AACA,C,CAED;;;AACAX,KAAK,CAACY,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAG;AACvCV,EAAAA,YAAY;;AAEZ,MAAGW,YAAY,CAACC,QAAhB,EAAyB;AACxB;AACAF,IAAAA,MAAM,CAACG,OAAP,CAAeC,aAAf,GAA+BH,YAAY,CAACC,QAA5C;AACA;;AAED,SAAOF,MAAP;AACA,CATD,EASE,UAAAK,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAXD,E,CAaA;;AACApB,KAAK,CAACY,YAAN,CAAmBW,QAAnB,CAA4BT,GAA5B,CAAgC,UAAAS,QAAQ,EAAG;AAC1Cb,EAAAA,UAAU;AACV,SAAOa,QAAP;AACA,CAHD,EAGE,UAAAH,KAAK,EAAI;AACV;AACAV,EAAAA,UAAU;AACVR,EAAAA,OAAO,CAACkB,KAAR,CAAcA,KAAK,CAACG,QAAN,CAAeC,IAA7B,EAHU,CAKV;;AACA,MAAQC,MAAR,GAAmBL,KAAK,CAACG,QAAzB,CAAQE,MAAR;;AACA,MAAGA,MAAM,IAAI,GAAb,EAAiB;AAChBvB,IAAAA,OAAO,CAACkB,KAAR,CAAc,aAAd,EADgB,CAEhB;;AACAJ,IAAAA,YAAY,CAACU,UAAb,CAAwB,UAAxB,EAHgB,CAIhB;;AACAvB,IAAAA,MAAM,CAACwB,IAAP,CAAY,QAAZ;AACA;;AAED,SAAON,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAnBD;AAqBA,eAAepB,KAAf","sourcesContent":["import axios from \"axios\";\r\nimport { Loading, Message } from \"element-ui\";\r\nimport router from \"./router/index.js\"\r\n\r\nlet loading;\r\nfunction startLoading(){\r\n\tloading = Loading.service({\r\n\t\tlock: true,\r\n\t\ttext:'加載中...',\r\n\t\tbackground:'rgba(0,0,0,0,7)'\r\n\t});\r\n}\r\n\r\nfunction endLoading(){\r\n\tloading.close();\r\n}\r\n\r\n//請求攔截\r\naxios.interceptors.request.use(config =>{\r\n\tstartLoading();\r\n\t\r\n\tif(localStorage.eleToken){\r\n\t\t//設置統一的請求\r\n\t\tconfig.headers.Authorization = localStorage.eleToken\r\n\t}\r\n\t\r\n\treturn config;\r\n},error => {\r\n\treturn Promise.reject(error)\r\n});\r\n\r\n//響應攔截\r\naxios.interceptors.response.use(response =>{\r\n\tendLoading();\r\n\treturn response;\r\n},error => {\r\n\t//錯誤提醒\r\n\tendLoading();\r\n\tMessage.error(error.response.data);\r\n\t\r\n\t//獲取錯誤狀態碼\r\n\tconst { status } = error.response;\r\n\tif(status == 401){\r\n\t\tMessage.error(\"登入已超時,請重新登入\");\r\n\t\t//清除token\r\n\t\tlocalStorage.removeItem(\"eleToken\");\r\n\t\t//跳轉回登入頁面\r\n\t\trouter.push(\"/login\");\r\n\t}\r\n\t\r\n\treturn Promise.reject(error)\r\n});\r\n\r\nexport default axios;\r\n"]}]}